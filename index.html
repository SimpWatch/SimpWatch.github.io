<head lang="en">
  <title>Simp Watch</title>
  <link rel="shortcut icon" href="icon.png">

  <link rel="stylesheet" href="simpwatch.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar navbar-dark bg-dark">
    <div class="navbar-header">
      <a href="?"><!--suppress CheckImageSize --> <img src="icon-large.png" height="30" alt="Website icon"></a>
      <span class="navbar-links" id="nav-links"></span>
    </div>

    <script src="navigation.js"></script>
  </nav>

  <!-- Page Content -->
  <div id="content" class="content text-center">
    <!-- Intro -->
    <div class="centered" id="watch-a-simp">
      <h1> Live Simp Reports </h1>
      <p>
        Choose a simp from the menu above to view the live report on the simps current and past simping activity!
      </p>
    </div>

    <!-- Simp Not Found -->
    <div class="centered" id="simp-not-found" style="display: none">
      <h1> Simp Not Found </h1>
      <p>
        We do not known any simps called <u id="simp-name-not-found"></u> :(
      </p>
    </div>

    <!-- Simp Report -->
    <div id="simp-report" style="display: none">
      <h1><u id="simp-name"></u></h1>
      <h2><i id="simp-description"></i></h2>

      <div class="container">
        <div class="row">
          <!-- Severity -->
          <div class="report-section col-md-3" style="margin-top: 15px;">
            <b>Score</b>
            <div style="font-size: 72px; padding: 10px;"><b id="simp-score"></b></div>
            <div style="color: darkgray;"><i id="simp-comment"></i></div>
          </div>
          <!-- Time -->
          <div class="report-section col-md-8 offset-md-1" style="margin-top: 15px;">
            <b>Activity</b>
            <div id="simp-activity"></div>
          </div>
        </div>
        <div class="row">
          <!-- History -->
          <div class="report-section col-md-12" style="margin-top: 15px;">
            <b>History</b>
            <div id="simp-history"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Simp Report Setup -->
    <script>
      function setupReport(simp, data) {
        //Title
        $("#simp-name").html(`Simp ${simp}`)
        $("#simp-description").html(data.description)

        //Score
        $("#simp-score").html(data.score)
        $('#simp-score').css("color", data.color)
        $("#simp-comment").html(data.comment)
      }

      function setupReportCharts(simp, data) {
        //Activity
        new google.visualization.BarChart(document.getElementById('simp-activity')).draw(
                google.visualization.arrayToDataTable([
                  ["Year",            simp,                "Average Simp",    "Virgin Simp",   "Twitch Chat Simp"],
                  ["Current Year",    data.activity.current,            0,                0,                    0],
                  ["Previous Year",   data.activity.previous,           0,                0,                    0]
                ]), {"legend": "bottom"})

        //History
        let historyData = [["Year", "Simp Activity"]]
        for(let entry in data.history) {
          historyData.push([entry, data.history[entry]])
        }

        new google.visualization.LineChart(document.getElementById('simp-history')).draw(
                google.visualization.arrayToDataTable(historyData), {"legend": "bottom"})
      }
    </script>
  </div>

  <script src="page-setup.js"></script>
</body>
